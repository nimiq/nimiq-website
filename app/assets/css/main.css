/* Font rendering to match production */
html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* Accessibility: Global reduced motion */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Accessibility: Focus visible styles */
:focus-visible {
  outline: 2px solid var(--color-blue);
  outline-offset: 2px;
}

/* Accessibility: Skip link */
.skip-link {
  position: absolute;
  top: -100%;
  left: 16px;
  padding: 8px 16px;
  background: var(--color-blue);
  color: white;
  border-radius: 4px;
  z-index: 9999;
  text-decoration: none;
  font-weight: 600;
}

.skip-link:focus {
  top: 16px;
}

/* Fix nq-pill-tertiary - nimiq-css has invalid outline syntax and gradient override issue */
.nq-pill-tertiary,
[nq-pill-tertiary] {
  background-image: none !important;
  background: var(--color-neutral-0) !important;
  color: var(--color-neutral) !important;
  outline: 1.5px solid var(--color-neutral-500) !important;
}
.nq-pill-tertiary:hover,
[nq-pill-tertiary]:hover {
  background: var(--color-neutral-50) !important;
  outline-color: var(--color-neutral-600) !important;
}

/* ==========================================================================
   Static Content Styling
   Section spacing, heading hierarchy, and content layout
   ========================================================================== */

:root {
  /* Viewport widths for fluid spacing */
  --f-space-width-min: 320;
  --f-space-width-max: 1440;
}

/* Base body styles for static content */
body:not(.nq-raw) {
  background-color: var(--color-neutral-100);
  --nq-max-width: 73rem;
}

body:not(.nq-raw):not(
    :where(.nq-no-color, [nq-no-color], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact])
  ) {
  color: var(--color-neutral-800);
}

/* ==========================================================================
   Heading Hierarchy
   Fluid typography for h1-h4 with responsive sizing
   ========================================================================== */

body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ) {
  --f-space-width-range: calc(var(--f-space-width-max) - var(--f-space-width-min));
  --f-space-scale-factor: calc((100vw - (1px * var(--f-space-width-min))) / var(--f-space-width-range));
  --f-font-size-range: calc(var(--font-size-max) - var(--font-size-min));
  --f-font-size-fluid: calc(1px * var(--font-size-min) + var(--f-font-size-range) * var(--f-space-scale-factor));
  --f-font-size: clamp(calc(1px * var(--font-size-min)), var(--f-font-size-fluid), calc(var(--font-size-max) * 1px));
}

/* h1 styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h1) {
  font-weight: 600;
  max-width: 26ch;
  text-align: left;
  margin: 0;
  line-height: 1.3;
  --font-size-min: 44;
  --font-size-max: 48;
  font-size: var(--f-font-size);
}

body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h1):where(.nq-heading-lg, [nq-heading-lg]) {
  --font-size-min: 44;
  --font-size-max: 64;
}

@media screen and (min-width: 768px) {
  body:not(.nq-raw)
    :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
      :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
    ):where(h1) {
    text-align: center;
  }
}

/* h1 + p styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h1)
  + p {
  margin-top: 24px;
  max-width: 42ch;
  line-height: 1.5;
  --font-size-min: 20;
  --font-size-max: 22;
  font-size: var(--f-font-size);
}

@media screen and (min-width: 768px) {
  body:not(.nq-raw)
    :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
      :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
    ):where(h1)
    + p {
    text-align: center;
  }
}

/* h2 styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h2) {
  font-weight: 600;
  max-width: 33ch;
  margin: 0;
  --font-size-min: 32;
  --font-size-max: 40;
  font-size: var(--f-font-size);
  line-height: 1.3;
  text-align: left;
}

body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h2):where(.nq-heading, [nq-heading]) {
  --font-size-min: 36;
  --font-size-max: 44;
}

*:not(.nq-no-color):not([nq-no-color]):not(.nq-no-color *):not([nq-no-color] *)
  body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h2) {
  color: var(--color-neutral);
}

@media screen and (min-width: 768px) {
  body:not(.nq-raw)
    :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
      :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
    ):where(h2) {
    text-align: center;
  }
}

/* h2 + p styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h2)
  + p {
  margin-top: 16px;
  color: color-mix(in oklch, var(--color-neutral-800) 85%, transparent);
  max-width: 70ch;
  line-height: 1.5;
  --font-size-min: 20;
  --font-size-max: 22;
  font-size: var(--f-font-size);
}

@media screen and (min-width: 768px) {
  body:not(.nq-raw)
    :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
      :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
    ):where(h2)
    + p {
    text-align: center;
  }
}

/* h3 styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h3) {
  font-weight: 600;
  line-height: 1.3;
  --font-size-min: 26;
  --font-size-max: 30;
  font-size: var(--f-font-size);
}

*:not(.nq-no-color):not([nq-no-color]):not(.nq-no-color *):not([nq-no-color] *)
  body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h3) {
  color: var(--color-neutral);
}

/* h3 + p styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h3)
  + p {
  margin-top: 16px;
  line-height: 1.5;
  --font-size-min: 18;
  --font-size-max: 20;
  font-size: var(--f-font-size);
}

/* h4 styles */
body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h4) {
  font-weight: 600;
  line-height: 1.3;
  --font-size-min: 22;
  --font-size-max: 26;
  font-size: var(--f-font-size);
}

*:not(.nq-no-color):not([nq-no-color]):not(.nq-no-color *):not([nq-no-color] *)
  body:not(.nq-raw)
  :not(:has(:is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *)):not(
    :is(.nq-raw, [nq-raw], .nq-prose, [nq-prose], .nq-prose-compact, [nq-prose-compact]) *
  ):where(h4) {
  color: var(--color-neutral);
}

/* ==========================================================================
   Section Layout
   Fluid padding and width constraints for sections
   ========================================================================== */

body:not(.nq-raw) :where(section, [data-section]) {
  display: flex;
  flex-direction: column;
  justify-content: center;
  margin-left: auto;
  margin-right: auto;

  /* Fluid spacing variables */
  --f-space-width-range: calc(var(--f-space-width-max) - var(--f-space-width-min));
  --f-space-scale-factor: calc((100vw - (1px * var(--f-space-width-min))) / var(--f-space-width-range));

  /* Fluid padding-top */
  --f-pt-range: calc(var(--f-pt-max) - var(--f-pt-min));
  --f-pt-fluid: calc(1px * var(--f-pt-min) + var(--f-pt-range) * var(--f-space-scale-factor));
  --f-pt: clamp(calc(1px * var(--f-pt-min)), var(--f-pt-fluid), calc(var(--f-pt-max) * 1px));

  /* Fluid padding-bottom */
  --f-pb-range: calc(var(--f-pb-max) - var(--f-pb-min));
  --f-pb-fluid: calc(1px * var(--f-pb-min) + var(--f-pb-range) * var(--f-space-scale-factor));
  --f-pb: clamp(calc(1px * var(--f-pb-min)), var(--f-pb-fluid), calc(var(--f-pb-max) * 1px));

  /* Fluid padding-x */
  --f-px-range: calc(var(--f-px-max) - var(--f-px-min));
  --f-px-fluid: calc(1px * var(--f-px-min) + var(--f-px-range) * var(--f-space-scale-factor));
  --f-px: clamp(calc(1px * var(--f-px-min)), var(--f-px-fluid), calc(var(--f-px-max) * 1px));

  /* Default values */
  --f-px-min: 32;
  --f-px-max: 80;
  --f-pt-min: 160;
  --f-pt-max: 200;
  --f-pb-min: 160;
  --f-pb-max: 200;

  /* Allow override via CSS custom properties */
  --pt: var(--f-pt);
  --pb: var(--f-pb);
  --px: var(--f-px);

  /* Responsive max-width */
  --nq-max-width: calc(100vw - 4rem);

  padding: var(--pt, 0) var(--px, 0) var(--pb, 0) var(--px, 0);
}

@media screen and (min-width: 769px) {
  body:not(.nq-raw) :where(section, [data-section]) {
    align-items: center;
  }
}

@media screen and (min-width: 1152px) {
  body:not(.nq-raw) :where(section, [data-section]) {
    --nq-max-width: calc(100vw - 9rem);
  }
}

@media screen and (min-width: 1440px) {
  body:not(.nq-raw) :where(section, [data-section]) {
    --nq-max-width: 73rem;
  }
}

/* Section children max-width */
body:not(.nq-raw) :where(section, [data-section]) > * {
  max-width: var(--nq-max-width);
}

/* Wide sections */
body:not(.nq-raw) :where(section, [data-section]):is(.nq-wide, [nq-wide]) {
  --nq-max-width: none;
  --px: 0;
  width: 100%;
  margin: 0 auto;
  align-items: center;
}

/* Dark sections color scheme */
body:not(.nq-raw) :where(section, [data-section]):is(.bg-darkblue, [bg-darkblue], .bg-darkerblue, [bg-darkerblue]) {
  color-scheme: dark;
}

/* Last section reduced padding */
body:not(.nq-raw) :where(section, [data-section]):last-child {
  --f-pb-min: 32;
  --f-pb-max: 48;
}

/* ==========================================================================
   Section Gap Rules
   Adjacent sections with same background get reduced spacing
   ========================================================================== */

/* Same background - reduced spacing */
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-darkblue, [bg-darkblue]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(.bg-darkblue, [bg-darkblue])
  ),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-darkerblue, [bg-darkerblue]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(
        .bg-darkerblue,
        [bg-darkerblue]
      )
  ),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-neutral-100, [bg-neutral-100]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(
        .bg-neutral-100,
        [bg-neutral-100]
      )
  ),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-neutral-0, [bg-neutral-0]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(
        .bg-neutral-0,
        [bg-neutral-0]
      )
  ) {
  --f-pb-min: 36;
  --f-pb-max: 48;
}

body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-darkblue, [bg-darkblue]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(.bg-darkblue, [bg-darkblue])
  )
  + :where(section, [data-section]),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-darkerblue, [bg-darkerblue]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(
        .bg-darkerblue,
        [bg-darkerblue]
      )
  )
  + :where(section, [data-section]),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-neutral-100, [bg-neutral-100]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(
        .bg-neutral-100,
        [bg-neutral-100]
      )
  )
  + :where(section, [data-section]),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-neutral-0, [bg-neutral-0]):has(
    + :where(section, [data-section]):not(:where(.nq-section-gap, [nq-section-gap])):where(
        .bg-neutral-0,
        [bg-neutral-0]
      )
  )
  + :where(section, [data-section]) {
  --f-pt-min: 36;
  --f-pt-max: 48;
}

/* Different backgrounds or section-gap - full spacing */
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-darkblue, [bg-darkblue], .bg-darkerblue, [bg-darkerblue]):has(
    + :where(section, [data-section]):where(
        .bg-neutral-100,
        .bg-neutral-0,
        [bg-neutral-100],
        [bg-neutral-0],
        .nq-section-gap,
        [nq-section-gap]
      )
  ),
body:not(.nq-raw)
  :where(section, [data-section]):where(.bg-neutral-0, [bg-neutral-0], .bg-neutral-100, [bg-neutral-100]):has(
    + :where(section, [data-section]):where(
        .bg-darkblue,
        [bg-darkblue],
        .bg-darkerblue,
        [bg-darkerblue],
        .nq-section-gap,
        [nq-section-gap]
      )
  ) {
  --f-pb-min: 160;
  --f-pb-max: 200;
}
